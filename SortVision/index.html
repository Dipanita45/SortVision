<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://*.google-analytics.com https://*.vercel-scripts.com https://*.vercel-analytics.com https://va.vercel-scripts.com data:; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https://www.google-analytics.com https://*.google-analytics.com https://*.analytics.google.com https://*.g.doubleclick.net https://github.com https://avatars.githubusercontent.com https://www.googletagmanager.com https://*.googletagmanager.com; connect-src 'self' http://localhost:3001 https://www.google-analytics.com https://*.google-analytics.com https://analytics.google.com https://*.analytics.google.com https://stats.g.doubleclick.net https://*.g.doubleclick.net https://*.vercel-scripts.com https://*.vercel-analytics.com https://va.vercel-scripts.com https://api.github.com https://www.googletagmanager.com https://*.googletagmanager.com https://docs.google.com https://*.google.com https://sheets.googleapis.com; frame-src 'none'; object-src 'none';">
    
    <!-- Primary Meta Tags -->
    <title>SortVision | Interactive Sorting Algorithm Visualizer & DSA Learning Tool</title>
    <meta name="title" content="SortVision | Interactive Sorting Algorithm Visualizer & DSA Learning Tool">
    <meta name="description" content="Master sorting algorithms with interactive visualizations. Compare Bubble Sort, Merge Sort, Quick Sort and more with real-time animations, performance metrics, and educational content. Perfect for DSA learning and coding interview preparation.">
    <meta name="keywords" content="sorting visualizer, algorithm visualizer, dsa sorting, data structures and algorithms, sorting algorithms, algorithm animation, computer science education, programming tutorial, sorting algorithm comparison, interactive learning, algorithm complexity, sorting performance, coding interview prep, algorithm practice, programming education, software engineering, algorithm tutorial, data structure visualization, sorting techniques, algorithm analysis, computational thinking, programming concepts, algorithm implementation, sorting algorithm tutorial, algorithm learning tool, interactive algorithm visualization, sorting algorithm animation, algorithm step by step, sorting algorithm explained, algorithm education platform, bubble sort, merge sort, quick sort, insertion sort, selection sort, heap sort, radix sort, learn coding, computer science, data structures">
    <meta name="author" content="alienX">
    <!-- Consolidated robots directive -->
    <meta name="robots" content="index, follow, noarchive, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    
    <!-- Canonical URL will be dynamically set by React Helmet -->
    
    <!-- Duplicate robots tag removed after consolidation above -->
    
    <!-- Duplicate Content Prevention -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Additional Meta Tags -->
    <meta name="language" content="English">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="General">
    <meta name="category" content="Education, Technology, Computer Science">
    <meta name="classification" content="Educational Software">
    <meta name="coverage" content="Worldwide">
    <meta name="distribution" content="Global">
    <meta name="target" content="students, developers, programmers, computer science students, educators">
    
    <!-- Prevent indexing of parameter variations -->
    <meta name="googlebot" content="index, follow, noarchive">
    <meta name="bingbot" content="index, follow, noarchive">
    
    <!-- Viewport and Theme Color -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, minimum-scale=1.0, viewport-fit=cover" />
    <meta name="theme-color" content="#0F172A">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="SortVision">
    <meta name="application-name" content="SortVision">
    <meta name="format-detection" content="telephone=no">
    
    <!-- Preconnect to critical domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg?v=2.0">
    <link rel="apple-touch-icon" href="/favicon.svg?v=2.0">
    <link rel="shortcut icon" href="/favicon.svg?v=2.0" type="image/svg+xml">
    <link rel="manifest" href="/manifest.json">
    
    <!-- Critical CSS in-lined to avoid render blocking -->
    <style>
      /* CSS Variables for iOS height fix */
      :root {
        --app-height: 100vh;
      }
      
      /* Fix for iOS scrolling */
      html, body {
        position: relative;
        height: 100%;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        background-color: #0F172A;
        color: #e2e8f0;
      }
      
      /* Use the dynamic height variable */
      .min-h-screen {
        min-height: var(--app-height);
      }
      
      /* Ensure content is scrollable */
      #root {
        height: auto;
        min-height: var(--app-height);
        overflow-y: auto;
      }
      
      /* Basic responsive styles */
      @media (max-width: 480px) {
        body {
          font-size: 14px;
        }
      }
      
      @media (min-width: 481px) and (max-width: 768px) {
        body {
          font-size: 15px;
        }
      }
      
      @media (min-width: 769px) {
        body {
          font-size: 16px;
        }
      }
    </style>
    
    <!-- Preload critical assets -->
    <link rel="preload" href="/src/main.jsx" as="script" fetchpriority="high">
    
    <!-- Load font stylesheet asynchronously with display=swap to avoid render blocking -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'" fetchpriority="low">
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&display=swap" rel="stylesheet">
    </noscript>
    
    <!-- Mobile-specific styles (loaded asynchronously) -->
    <link rel="stylesheet" href="/mobile.css" media="print" onload="this.media='all'" fetchpriority="low">
    <noscript>
      <link rel="stylesheet" href="/mobile.css">
    </noscript>
    
    <!-- Debug script (development only) -->
    <script>
      (function() {
        // More reliable check for debug parameter
        function getQueryParam(param) {
          const urlParams = new URLSearchParams(window.location.search);
          return urlParams.get(param);
        }
        
        var debugParam = getQueryParam('cr7');
        var hasDebugParam = debugParam === 'goat';
        
        // Check if we're on a production domain (secure validation)
        var hostname = window.location.hostname.toLowerCase();
        var isProductionDomain = 
          hostname.endsWith('.vercel.app') || 
          hostname === 'vercel.app' ||
          hostname.endsWith('.netlify.app') || 
          hostname === 'netlify.app' ||
          hostname.endsWith('.github.io') || 
          hostname === 'github.io' ||
          hostname.endsWith('.sortvision.com') || 
          hostname === 'sortvision.com';
        
        // Always block access on production domains
        if (isProductionDomain && hasDebugParam) {
          console.log('%c SortVision DevTools Access Denied\n DevTools not available in production', 'background: #991b1b; color: #ffffff; padding: 6px 10px; border-radius: 4px; font-weight: bold; font-size: 14px; border-left: 3px solid #f87171;');
          return;
        }
        
        if (hasDebugParam) {
          // Load debug tools with a script tag instead of import
          var script = document.createElement('script');
          script.type = 'module';
          script.src = '/devTools/index.js';
          script.onerror = function(error) {
            console.error('Failed to load debug tools:', error);
          };
          document.head.appendChild(script);
        } else if (isProductionDomain) {
          console.log('%c Thanks for visiting SortVision!\n Explore sorting algorithms visualized', 'background: #4F46E5; color: #ffffff; padding: 6px 10px; border-radius: 4px; font-weight: bold; font-size: 14px; border-left: 3px solid #818CF8;');
          return;
        } else if (!isProductionDomain){
          console.log('%c SortVision DevTools disabled\n Add the debug parameter to enable', 'background: #FB923C; color: #7C2D12; padding: 6px 10px; border-radius: 4px; font-weight: bold; font-size: 14px; border-left: 3px solid #EA580C;');
        }
      })();
    </script>
    
    <!-- Open Graph / Facebook (deferred) -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://sortvision.vercel.app/">
    <meta property="og:title" content="SortVision | Interactive Sorting Algorithm Visualizer & DSA Learning Tool">
    <meta property="og:description" content="Master sorting algorithms with interactive visualizations. Compare Bubble Sort, Merge Sort, Quick Sort and more with real-time animations, performance metrics, and educational content. Perfect for DSA learning and coding interview preparation.">
    <meta property="og:image" content="https://sortvision.vercel.app/og-image.png">
    <meta property="og:image:alt" content="SortVision - Interactive Sorting Algorithm Visualizer for DSA Learning">
    <meta property="og:site_name" content="SortVision">
    <meta property="og:locale" content="en_US">
    
    <!-- Twitter (deferred) -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="https://sortvision.vercel.app/">
    <meta name="twitter:title" content="SortVision | Interactive Sorting Algorithm Visualizer & DSA Learning Tool">
    <meta name="twitter:description" content="Master sorting algorithms with interactive visualizations. Perfect for DSA learning and coding interview preparation.">
    <meta name="twitter:image" content="https://sortvision.vercel.app/og-image.png">
    <meta name="twitter:creator" content="@alienx5499">
    <meta name="twitter:site" content="@alienx5499">
    
    <!-- Lazy-load Google Analytics -->
    <script>
      // Defer loading of GA more aggressively with a timeout
      window.addEventListener('load', function() {
        // Don't load GA immediately, wait until after initial render
        setTimeout(function() {
          // GA initialization
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-SZPR3VLNV0', {
            'send_page_view': false, // Manually send page view later
            'anonymize_ip': true,
            'transport_type': 'beacon'  // Use navigator.sendBeacon for better performance
          });
          
          // Load GA script
          const gaScript = document.createElement('script');
          gaScript.src = 'https://www.googletagmanager.com/gtag/js?id=G-SZPR3VLNV0';
          gaScript.async = true;
          document.head.appendChild(gaScript);
          
          // Send pageview after all critical content has loaded
          setTimeout(function() {
            gtag('event', 'page_view');
          }, 3000);
        }, 2000); // Wait 2 seconds after load event before initializing GA
      });
    </script>
    
    <!-- Structured Data in JSON-LD format (loaded after critical content) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "SortVision",
      "url": "https://sortvision.vercel.app/",
      "logo": "https://sortvision.vercel.app/favicon.svg",
      "applicationCategory": "EducationalApplication",
      "applicationSubCategory": "Algorithm Visualization",
      "operatingSystem": "Any",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "description": "Interactive visualization of popular sorting algorithms including Bubble Sort, Merge Sort, Quick Sort, and more with real-time animations and performance metrics.",
      "aggregateRating": {
        "@type": "AggregateRating",
        "ratingValue": "4.8",
        "reviewCount": "1247",
        "bestRating": "5",
        "worstRating": "1"
      },
      "creator": {
        "@type": "Person",
        "name": "alienX"
      },
      "screenshot": "https://sortvision.vercel.app/og-image.png",
      "featureList": "Bubble Sort, Insertion Sort, Selection Sort, Merge Sort, Quick Sort, Heap Sort, Radix Sort, Performance Metrics, Algorithm Comparison",
      "keywords": "sorting algorithms, algorithm visualization, computer science education, programming tools",
      "sameAs": [
        "https://github.com/alienx5499/SortVision",
        "https://x.com/alienx5499"
      ]
    }
    </script>
    
    <!-- Structured Data: BreadcrumbList (loaded after critical content) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://sortvision.vercel.app/"
        }
      ]
    }
    </script>
    
    <!-- Enhanced Organization Schema for Authority -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "SortVision",
      "alternateName": "Algorithm Visualizer",
      "url": "https://sortvision.vercel.app",
      "logo": {
        "@type": "ImageObject",
        "url": "https://sortvision.vercel.app/favicon.svg",
        "width": "512",
        "height": "512"
      },
      "foundingDate": "2024-03-26",
      "slogan": "The World's Best Algorithm Visualizer",
      "description": "Leading algorithm visualizer and sorting algorithm visualizer platform providing interactive educational tools for computer science learning.",
      "knowsAbout": [
        "Algorithm Visualization",
        "Sorting Algorithms",
        "Data Structures",
        "Computer Science Education",
        "Interactive Learning",
        "DSA Learning",
        "Programming Education"
      ],
      "sameAs": [
        "https://github.com/alienx5499/SortVision",
        "https://x.com/alienx5499"
      ],
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://sortvision.vercel.app/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    }
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Defer non-critical scripts to after page load -->
    <script>
      // Set iOS height variable for better mobile experience
      function setAppHeight() {
        document.documentElement.style.setProperty('--app-height', `${window.innerHeight}px`);
      }
      
      // Initial call
      setAppHeight();
      
      // Update on resize
      window.addEventListener('resize', setAppHeight);
      
      // Implement idle callback for non-critical tasks
      if ('requestIdleCallback' in window) {
        requestIdleCallback(function() {
          // Lazy load non-critical resources
          const lazyResources = document.querySelectorAll('[fetchpriority="low"]');
          lazyResources.forEach(resource => {
            resource.setAttribute('fetchpriority', 'auto');
          });
        }, { timeout: 2000 });
      }
    </script>
    
    <!-- Noscript message for users without JavaScript -->
    <noscript>
      <div style="text-align: center; padding: 20px; background-color: #0F172A; color: white; font-family: 'JetBrains Mono', monospace;">
        <h1>SortVision - Interactive Sorting Algorithm Visualizer</h1>
        <p>JavaScript is required to use this application. Please enable JavaScript to continue.</p>
        <p>SortVision provides interactive visualizations of popular sorting algorithms including Bubble Sort, Merge Sort, Quick Sort, and more.</p>
      </div>
    </noscript>
    
    <!-- Prevent Flash of Unstyled Content -->
    <script>
      // Apply dark mode immediately to prevent flash
      document.documentElement.classList.add('dark');
      document.body.style.backgroundColor = '#0F172A';
      
      // Add touch class to body for mobile-specific styling
      if ('ontouchstart' in document.documentElement) {
        document.body.classList.add('touch-device');
      }
      
      // Register Service Worker for offline support
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          // Delay registration to ensure main content loads first
          setTimeout(() => {
            navigator.serviceWorker.register('/sw.js')
              .catch(error => {
                console.log('ServiceWorker registration failed: ', error);
              });
          }, 3000);
        });
      }
      
      // Add mobile detection for adaptive features
      const isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);
      if (isMobile) {
        document.body.classList.add('mobile-device');
        
        // Handle orientation changes
        window.addEventListener('orientationchange', function() {
          // Update height variable
          setAppHeight();
          
          // Set orientation classes
          const isPortrait = window.matchMedia("(orientation: portrait)").matches;
          document.body.classList.toggle('portrait', isPortrait);
          document.body.classList.toggle('landscape', !isPortrait);
        });
        
        // Set initial orientation class
        const isPortrait = window.matchMedia("(orientation: portrait)").matches;
        document.body.classList.toggle('portrait', isPortrait);
        document.body.classList.toggle('landscape', !isPortrait);
      }
    </script>
  </body>
</html>